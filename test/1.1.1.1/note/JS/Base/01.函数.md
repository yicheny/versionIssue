[TOC]

# 选择函数作为第一步的理由
 以**函数式语言**去理解JS,这一点的认知很大程度上影响了代码的编写水平，要写出更优秀的代码，便需要深入理解JS中的函数。简单来说，深入理解JS的函数是写出优秀代码的关键
 
 记住一句话，**函数在JS中是第一类对象**,所谓第一类对象，意思是函数可以作为普通变量声明使用，可以作为参数或者返回值传递，也可以作为函数使用。
 
 简单来理解，一般变量能做的函数可以做，其他变量做不了的函数也能做。
 
 函数在JS中是极为独特的存在，在ES6之前，只有函数可以拥有私有作用域。
 
 # 函数式编程和普通编程区别
 JS是一门面向对象的语言，有一句话是这么形容JS的`在JS中，万物皆对象`。
 
在JS中，分为复杂数据类型和简单数据类型【以下只讨论ES6之前】，简单数据类型有Number,String,Boolean,null,undefined五种，复杂数据类型有function和object两种。

什么是简单数据类型，简单数据类型就是数据值的简单表示，是单纯的值，自己并没有任何方法。但是我们知道，很多时候我们都会使用基本类型值的一些内置方法去做一些操作，例如：
```
var a = '123';
console.log(a.includes('3'));//true
```
那么，这又是怎么一回事呢？

在JS中，内置了一些基本包装对象，例如Number,String,Date,Math等等，不同于基本数据类型，它们是引用类型，简单来说它们都是对象，都有着自己的属性和方法。

实际上，基本数据类型使用内置的方法时都是通过这些基本包装对象实现的，刚刚的代码JS执行过程其实是这样的：
```
执行到a.includes('3')时：

temp = new String(a); //首先创建一个String类型的临时实例
console.log(temp.includes('3'));//调用这个实例上的内置方法
temp = null;//最后销毁这个实例
```
所以，JS中的简单类型值虽然可以使用内置的方法，却不能像对象一样自由的添加方法或属性，而通过基本包装对象实例化的值却可以[因为实例化出来的就是要给对象]。
```
//通过字面量方式创建
var a = '123';
a.name = 'lalala';
console.log(a.name);//undefined

//通过new关键字实例化创建
var a = new String('123');
a.name = 'lalala';
console.log(a,a.name);//'lalala'
```

因为JS是一门面向对象的语言，所以在深入学习函数之前，至少需要对JS的对象有所了解。下面，总结下对象的特点。

## 对象的一些特点
- 可以通过字面量方式创建
- 对象可以赋值给变量、数组项或其他数组属性
- 对象可以作为函数的参数和返回值
- 对象可以对台的创建和设置属性

以上这些，函数都可以做到，所有对象能做的它都能做，而且它更特殊，特殊在**函数是可调用的**,函数通过调用的方式执行一系列动作。

那么，这个特殊之处可以为编写者带来什么好处呢？

往宽泛了说，使用函数式写法，更利用测试、扩展及模块化，更常见的，我们可以通过函数控制代码的执行时机【回调】，除此之外，函数的闭包特性也是非常非常有用的一个特性。

什么是闭包?一句话来说就是`在定义的作用域外部使用私有变量`。

下面来深入了解下函数的某些使用场景。

## 回调函数
什么是回调函数？

从字面意义上理解：`完成某些事之后回过头来再调用执行的函数`。

也就是说，回调函数并不是立即执行的，我们是可以决定它在合适的时机执行的，也就是说，它是异步的。

这是非常有意义的一件事，在ES6之前，实现异步有通常有两种方案，一种是使用计时器函数去做异步，一种是通过回调去做异步。

相对而言，异步是更优秀的方案，为什么？因为定时器不能准确控制执行时机【因为编写者无法把握前置事件的执行所耗费的时间】，而回调的执行时机更符合编写者的需求【执行完前置事件后就立刻执行】。

回调如果说有什么缺陷的话大概就是需要异步执行的事件过多会造成`回调地狱`,主要就是开发者看代码会很难受，所以后来有了Promise和async awiat。不过本质上而言并没有太大区别，只是代码形式上愈加符合`同步`的写法，就个人实际开发，简单异步通过回调实现依旧是最佳方案。

  
  
  
    
    